<!DOCTYPE html>
<html lang="pl">
<head>

  <meta charset="UTF-8" />
  <title>CS:GO Skrzynka</title>
  <link rel="stylesheet" href="logowG.css" />
</head>
<body>
 <header>
    <h1>Witaj na CS:GO Skrzynka</h1>
   
  </header>
<div id="balance">Saldo: 0 zł</div>

<input type="text" id="promoCode" placeholder="Kod promocyjny">
<button id="applyPromoBtn">Zastosuj kod</button>
<p id="messages"></p>

  <!-- Sekcja logowania Google adasdasd-->
  <div id="loginSection">
    <div id="g_id_onload"
         data-client_id="925130065491-uatooio0iqa35natp6p96i86q67hu4n6.apps.googleusercontent.com"
         data-callback="handleCredentialResponse">
    </div>
    <div class="g_id_signin" data-type="standard"></div>
  </div>

  <!-- Sekcja użytkownika po zalogowaniu -->
  <div id="user-info" style="display:none;">
    <p>Witaj, <span id="username"></span></p>
    <img id="profile-pic" src="" alt="Avatar" style="width: 100px; border-radius: 50%;" />
    <button id="logout-btn" style="display:none;">Wyloguj się</button>
  <br><br>
    <a href="losowanie1.html">Przejdź do losowania</a>
  </div>
  <!-- Skrypty -->
 
  <script>
    async function loadBalance() {
      try {
        const res = await fetch('/api/waluta/balance');
        if (res.ok) {
          const data = await res.json();
          document.getElementById('balance-display').textContent = `Saldo: ${data.balance} zł`;
        } else {
          document.getElementById('balance-display').textContent = 'Błąd ładowania salda';
        }
      } catch {
        document.getElementById('balance-display').textContent = 'Błąd sieci';
      }
    }

    document.addEventListener('DOMContentLoaded', loadBalance);
  </script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="logowG.js"></script>
    <script src="index.js"></script>
</body>
</html>
